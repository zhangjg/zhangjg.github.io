---
title: THML5中的锚点
tags : [编程,日志]
---
前几天的时候，我偶尔发现，HTML5中对于原来HTML中的使用a标签来定义的锚点不再支持了。然后就想着那么HTML5中是如何使用描点的。当时搜索找到了StackOverflow上的一个答案，但是因为墙的原因StackOverflow打开的非常慢，以至于我一不小心不那个好不容易加载出来的页面给关掉了。所以当时就没有立刻的获得这个知识。

今天又重新搜索了一下，但是没有找到哪天的那个链接。通过国内给出的例子，我也理解了这个知识点了。

在HTML中a标签支持name属性，通过name属性来定义一个锚地。然后通过其他位置的a标签的href属性来引用这个定义的锚点。

```HTML
<a name="anchor_name">锚点定义位置</a> <!-- 这里是锚点的定义 -->
.... <!-- 其他的代码-->
<a href="#anchor_name">跳转到name="anchor_name"的位置</a>
```
现在HTML5中不在支持a标签的name属性，那么如何来定义描点呢？答案是id属性。现在可以通过a标签跳转到任何的定义了id属性的标签位置。 所以上面的例子在HTML5中可以如下的来实现.

```HTML
<a id="anchor_name"> 描点定义位置</a> <!-- 任何HTML5标签都可以 -->

... <!-- 其他代码 -->
<a href="#anchor_name"> 调转到id="anchor_name"的标签位置</a>
```


那么为什么HTML5中这样来设计呢？我没有看相关的文档，我可以想到的HTML5这样的设计的原因有以下几点。

## 1.这样设计可以避免空文本的a标签###

在HTML中，如果要想为一个段落定义一个锚点，就必须在这个段落的开始的地方定义一个没有文本，只有name属性的a标签。例如：

```HTML
<h1>目录</h1>
<h2><a href="charp1">第一章</a></h2>
<h2><a href="charp2">第二章</a><h2>
...
<hr>

<h1><a name="charp1"></a> 第一章</h1>
<p>
   很久很久以前，...
</p>
<h1><a name="charp2"></a>第二章</h1>
<p>
    远远的，他们看到救兵到了...
</p>

```
可以看到其中`<a name="xxx"></a>`是很不每美观的，而且也是不太符合XML的语法习惯的。但是因为HTML对锚点的定义是用a标签来完成的，就不可避免的出现了这样的代码(我不清楚,直接写自闭的a标签语法正确与否，没有见到过有人写自闭的a标签，我也没有查相关的文档)。如果是HTML5的版本，就可以避免这样的不美观。

```HTML
<h1>目录</h1>
<h2><a href="charp1">第一章</a></h2>
<h2><a href="charp2">第二章</a><h2>
...
<hr>

<h1 id="charp1">第一章</h1>
<p>
   很久很久以前，...
</p>
<h1 id="charp2">第二章</h1>
<p>
    远远的，他们看到救兵到了...
</p>
```

上面我是从代码形式美，或者是否和XML统一的角度来说为什么HTML5中这样来设计锚点，下面从另外一个角度来看看。

## 2.这样可以定位更多的Tag##

所有的Tag都是支持id属性的，但是支持name属性的标签却是有限的个数的，而且其他的拥有name属性的Tag，他们的name的属性的作用，和a标签的是明显不一致的。去掉a标签的name属性，使用id熟悉来代替，第一完全能完成原来a标签的name属性可以完成的工作，第二可以大大的方便锚点定义。因为所有具有id的标签，在HTML5中，其实都是锚点了。

## 3.这样和CSS的代码中选择器的语法统一##

在CSS中用`#`作为`id`的选择器。Jquery的流行，使得操作DOM的时候也大量的使用CSS的选择器语法来获得元素的节点。现在的`document.querySelector()`和`document.querySelectorAll()`，方法也支持通过CSS语法来获取节点，所以对于网站前端来说，`#`几乎就是id的代名词了，但是除了它在a标签的href中，以及在URL中`#`的意思。而`#`在URL中意思其实就是在a标签中意义，因为URL中`#`是不和服务器交互的，这个知识我是从[阮一峰的博客](http://www.ruanyifeng.com/blog/2011/03/url_hash.html "URL中的井号")中看到的。因此，如果把a标签的href属性中的`#`的意义也和`id`对应起来，就完成了id与`#`在整个WEB前端的统一。

我想这可能HTML5中这样来实现描点的最主要的原因。

## 在HTML上实现交叉引用##

在Kindle上看书的时候，如果文档中有注释，点击之后可以跳到注释的位置，看完注释之后，点击注释上的链接，又可以调回到最初跳转的位置。不少的论文阅读软件都可以这样做。如果用LaTex写论文的话，生产的PDF也可以这样做。Word中的交叉索引功能好像也可以（好多年不用Word了具体怎么操作都忘记了）。在HTML中当然也是可以实现这样的功能的。但是WEB上很少有这样的需求，因为网页需要注释的地方场景实在是太少了。所以很少在WEB上如何使用交叉连接。

但是对于我这样的，从理科毕业，从事IT工作的人来说，写写自己的博客，无疑还是会有写论文的习惯，还是希望能有交叉索引的。那么如何来做呢？以下是HTML版本的实现。

```HTML
具体内容，请参考文献[<a href="#ref1" name="#1fer"> 1</a>]。
... <!-- 其他内容 -->

参考文献：<br>
[<a name="ref1" href="#1fer"> 1</a>] 张三 2016年1月1日 关于侃大山的学问
...
```

HTML5版本的代码是这样：

```HTML
具体内容，请参考文献[<a href="#ref1" id="#1fer"> 1</a>]。
... <!-- 其他内容 -->

参考文献：<br>
[<a id="ref1" href="#1fer"> 1</a>] 张三 2016年1月1日 关于侃大山的学问
...

```
可以看到，交叉索引的实现其实HTML5中没有什么改进。我想这可能是因为在设计a标签的时候，就已经把交叉引用的场景考虑到了的原因。毕竟最初的WEB是有理工男搞出来的嘛。

a标签中交叉引用，原来设计的时候可能是特意实现，想让大家这样用的，但是实际上这个互联网的世界中却很少这样用。

而相反，有些东西大家用的非常的频繁，当初设计的时候却没有去做那样的设计，比如对DOM的操作的时候，最初的API是通过`document.getElementById()`,`document.getElementByTameName()`,`document.getElementByClassName()`等来完成，即使在CSS推出之后，浏览器还是不支持像Jquery那样的操作。只到Jquery完全奠定了WEB界面库的统治地位多年后，Javascript才开始加入`document.querySelector()`这样的函数。

当然，造成这样段原因，一方面可能是也Javascript的标准制定流程有关，但我认为，更多的是标准的制作者，也没有预料到操作DOM的API是这样的高频使用，所以最初的时候，给出的编程接口才那样的不友好（每个函数的名字都那么长，太难为非用英语国家的程序员了）。

吸引我使用JQuery的最主要的就是他对DOM节点选取的灵活。有时候，使用JQuery，也只是用了对DOM节点的选取的功能，一个网页大小，还不到JQuery库大小的一半，这也是为什么我现在使用`documemt.querySelector()`来去掉JQuery库的原因。

国外很多的网站，使用Google的SDN来加载JQuery或其他的WEB常用的库代码，在国内很多时候，打开网页半天加载不全内容，就是因为这个网页都在等JQuery库的加载完成，而Google因为被<span>赵<span>国</span>政府封杀了，所以，连带的这些没有被封杀的页面也都打不开了。如果不用JQuery的库，而用浏览器自带的Javascript API来操作DOM，我想不但因为加载的内容少了很多，使得网页的打开速度变快，而且也能减少像上面这样的，城门失火，殃及池鱼的情况。
