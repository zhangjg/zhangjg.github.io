---
title: 旋转与四元素
layout: default
tags: [数学,日志]
---
今天研究如何把重力加速度从总的加速度中分离出来的问题,然后就碰到了四元素和旋转的问题.四元素,在以前,我也查过wikipedia,当时以为自己看懂了,但是现在看来是没有看懂.今天仔细的研读了wikipedia的相关内容,同时还参考了其他的资料,我觉的自己对四元素与旋转的关系搞的差不多清楚了.

关于四元素的历史,已经其他方面的治疗,大家可以参考[wikipedia](https://en.wikipedia.org/wiki/Quaternions_and_spatial_rotation "Quaternions_and_spatial_rotation ")的内容,今天我只说旋转与四元素的部分.
# 旋转的表示#
第一个问题是如何表示一个空间的旋转?对一个空间的旋转,可以有3中方法表示,第一种方法是矩阵表示.第二种方法是殴拉角,第三种方法就是四元素的方法.矩阵的方法,因为需要3&times;3的矩阵表示,一个旋转就需要9个参数.殴拉角只在这一点上比矩阵要好很多,她只需要3个就够了,三个绕着坐标轴转动的角度.但是殴拉角的表示方法的问题是,会出现所谓的万向锁的问题.四元素的方法,理解起来比较的复杂,但是却能避免这前两种方法的缺点.说实话,我也没有理解什么是万向锁问题.但是这不影响我理解四元素和旋转的关系.
# 四元素是什么？#
我的理解，四元素可以看作是一个标量和一个（三维）向量的组合，一般表示为\\(q=t+\overrightarrow{v}\\)，表示为坐标的形式就是（t,**i**x,**j**y,**k**z)，对于两个四元数，\\(q=t+\overrightarrow{v}\\),\\(p=u+\overrightarrow{w}\\)他们之间的运算如此定义,总的原则是标量和向量运算，按通常的标量与向量的计算法则，向量和向量，按照向量的计算法则。对虚数符号，i，j，k直接的运算，有如下的规则：ii=jj=kk=-1，ij=k=-ji，jk=i=-kj，ki=j=-ik.

![四元数加法](https://upload.wikimedia.org/math/2/8/e/28eaea82de1ec68f1dfc146d385f8b38.png)

![四元数乘法](https://upload.wikimedia.org/math/c/8/4/c8439d2102f59aa407da93e2da708782.png)

![四元数乘法](https://upload.wikimedia.org/math/6/7/b/67b8c21284a5840179de34ade5e3cd75.png)

# 四元素如何表示旋转#
三维空间中的旋转,可以表示为,绕着一个轴旋转一个角度.比如我们在平面上旋转,就可以理解为是绕着垂直与平面的轴在旋转.要确定一个平面,需要3中参数,也就是这个平面的法向量,它有三个参数,在加一个表示旋转角度的值,共四个参数.我们使用&theta;和**V**(x,y,z),来表示角度和向量V.这&theta;和V可以用来表示一个旋转.首先,法向量只表示方向就行了,所以,我们取单位向量,也就是说,对任意的向量,(v<sub>x</sub>,v<sub>y</sub>,v<sub>z</sub>),在表示四元素的时候,我们需要先单位化,也就是取(v<sub>x</sub>/|v|,v<sub>y</sub>/|v|,v<sub>z</sub>/|v|),下面的公式中出现的V的分量,都是单位化之后的向量.四元素使用这样的方式来表示有&theta;和V表示的旋转:

$$
(w=cos(\frac{\theta}{2}),ix=iv\_{x}sin(\frac{\theta}{2}),jy=jv\_{y}sin(\frac{\theta}{2}),kz=kv_{y}sin(\frac{\theta}{2})))
$$

# 如何用四元素来转动#
在三维空间中的一个点,用四元数来表示,可以表示为只有虚部的四元素,也就是说(0,**v**<sub>x</sub>,**v**<sub>y</sub>,**v**<sub>z</sub>).我们用p表示一个四元素,用p<sup>-1</sup>表示这个四元素的逆。如果对应的四元素p是单位四元素，那么p的模长就是1，那么有公式
$$p^{-1}=\frac{p^{*}}{|p|}=p^{*}$$
也就是，单位四元数的逆等于它的复共厄.用q表示一个纯虚的四元数,那么通过如下的变化还能得到一个纯虚的四元素:
q'=pqp<sup>-1</sup>.
这个q'就是q点绕着**v**向量转动&theta;角之后的值.
